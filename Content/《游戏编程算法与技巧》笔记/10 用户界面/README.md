# 10 用户界面

## 菜单系统

1. 典型的菜单系统需要实现: 菜单栈, 按钮, 打字输入
2. 菜单栈: 通常需要所有菜单继承自同一父类, 然后显示的时候只显示(或者堆叠显示)栈顶的菜单, 打开新菜单就是压栈, 关闭就是出栈. 为了方便使用, 菜单系统本身通常拥有栈中每个元素的引用
3. 按钮: 每个按钮应该有自己的感应区, 然后以类似链表的形式组织在菜单系统中, 并且拥有 未按下, 选择中, 按下 三个状态方便用户识别
4. 打字输入: 标准输入输出非常不适合游戏, 游戏需要图形效果. 游戏通常让画面渲染一个字符串, 每当我们按下一个键盘按键时, 将这个按键识别并转换为对应的字符, 再将这个新的字符连接到那个字符串的尾部, 然后将字符串渲染, 从而一方面实现了硬件输入与软件响应的分离, 又实现了可视化可订制的输出显示效果

## HUD系统

1. HUD系统通常在游戏场景渲染之后再在顶层绘制一次
2. HUD中有很多元素, 例如场景路点箭头, 可能是渲染在3D空间中的, 那么这些元素要记得在相机之后再渲染, 且需要获取相机当前显示的信息, 从而保证HUD元素位置和结果的正确
3. 准心: 也就是鼠标拣选算法的延申, 很多射击游戏有准星按拣选到的对象的信息进行变色/变形的功能
4. 雷达: 雷达通常是一个从游戏信息中额外渲染的2D场景, 雷达中的子场景的朝向通常和人物朝向相同, 且场景信息和其它对象信息都按所需进行不同的渲染

## 其它UI问题

1. UI最好能够支持多套分辨率, 解决方法是使用相对坐标进行UI设计, 使得相同比例而分辨率不同的屏幕也都能渲染出正确的结果
2. 如果无法使用相对坐标, 那么对UI按照分辨率进行缩放是一种可取方案
3. 本地化很重要, 支持本地化的关键在于将游戏中所有需要渲染出来的文字都保存在独立的类似JSON格式的外部文件中, 以Map的形式读写, 从而让渲染的时候能用key从文件中找出需要渲染的文字, 也就自然支持了本地化