# 9 简化条件表达式

- [9 简化条件表达式](#9-简化条件表达式)
  - [9.1 分解条件表达式](#91-分解条件表达式)
  - [9.2 合并条件表达式](#92-合并条件表达式)
  - [9.3 合并重复的条件片段](#93-合并重复的条件片段)
  - [9.4 移除控制标记](#94-移除控制标记)
  - [9.5 以卫语句取代嵌套条件表达式](#95-以卫语句取代嵌套条件表达式)
  - [9.6 以多态取代条件表达式](#96-以多态取代条件表达式)
  - [9.7 引入null对象](#97-引入null对象)
  - [9.8 引入断言](#98-引入断言)

## 9.1 分解条件表达式

不要在if-else中写太复杂的逻辑, 改为在if-else中调用子函数提高代码可读性, 让代码就像注释一样清楚

## 9.2 合并条件表达式

如果多个if检测条件不同但结果相同, 则用一个命名合适的函数将这多个if合在一起简化. 这个重构要注意不要引发副作用且要保证语义的完整性和可读性

## 9.3 合并重复的条件片段

一组条件表达式中都出现了相同的代码, 那么将这段代码包装好并提炼到条件式外面

## 9.4 移除控制标记

尽量用break, continue, return语句代替isDone之类的循环跳出标记, 这种做法虽然不那么适合"单一出口原则", 但能让语义更清晰, 看着办吧.

## 9.5 以卫语句取代嵌套条件表达式

条件表达式通常有两种表现形式。第一种形式是：所有分支都属于正常行为。第二种形式则是：条件表达式提供的答案中只有一种是正常行为，其他都是不常见的情况。如果是第一种则应该用if-else组合, 而如果是第二种则单独检查那些特殊条件, 并将这些条件视为一个特殊的if直接跳出函数, 强烈表达我们对出现这种情况后的代码不再感兴趣了. 这种风格同样会破坏单一出口原则, 但是很多时候代码更清晰.

## 9.6 以多态取代条件表达式

和第8章对于类型码的处理类似, 就是将switch提前到基类工厂函数的意思

## 9.7 引入null对象

null对象模式的核心是构造一种特殊的多态子类, 其是我们正常多态的分支, 可以和普通对象一样调用各种我们所需的功能, 但是其回应都是之前对象为null时应该返回的特殊值, 并带有isNull函数用来做基础判断. 这种模式一般都是用在与用户交互的任务中, 例如GUI环境, 能减少很多复杂的null判断.

本质上null对象模式属于Special Case模式(特例类模式), 最常见的就是float标准的NaN特例

## 9.8 引入断言

断言(Assert)本身就是一个特殊的条件语句, 用来表示那些由于程序员错误导致某些函数无法进行的致命问题. 断言通常都是debug阶段使用的, 在正式版本中断言会被全部移除因为普通用户不应该触发断言